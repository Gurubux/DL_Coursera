!function(){var l=window,u=window.TapfiliateObject||"tap",i=l[u]&&l[u].q||[];if(!l[u]||!l[u].loaded){l[u]=function(t,n,e,i,o,r){var a=l[u][t];if("function"!=typeof a)throw'Function "'+t+'" not supported';a(n,e,i,o,r)},l[u].loaded=!0,l[u].baseUrl="//frstre.com",l[u].baseUrlDepr="https://tapi.tapfiliate.com";var n,f;l[u].Tracking=l[u].Tracking||{},l[u].options=l[u].options||{},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},"indexOf"in Array.prototype||(Array.prototype.indexOf=function(t,n){void 0===n&&(n=0),n<0&&(n+=this.length),n<0&&(n=0);for(var e=this.length;n<e;n++)if(n in this&&this[n]===t)return n;return-1});var s=function(t){var n,e,i,o,r;if(e=[],r=/%20/g,i=function(t,n){n="function"==typeof n?n():null===n?"":n,e[e.length]=encodeURIComponent(t)+"="+encodeURIComponent(n)},t instanceof Array)for(o in t)i(o,t[o]);else for(n in t)c(n,t[n],i);return e.join("&").replace(r,"+")},r=new function(){var s={},l=0,u=[],c=[],f=!1,i=this;return this.addMethod=function(t){if(t.supported())return l++,s[t.key]=t,this},this.init=function(){var t=l;function n(){--t<=0&&(f=!0,function(){for(var t=u.length-1;0<=t;t--)i.read.apply(i,u[t]);for(var n=c.length-1;0<=n;n--)i.write.apply(i,c[n])}())}for(var e in s)"function"==typeof s[e].init?s[e].init(n):n()},this.read=function(t,n,i){if(f){var o=l,r=[],a={};for(var e in s){a[e]=setTimeout(c,2e3);try{s[e].read(t,c)}catch(t){}}}else u.push(arguments);function c(t,n,e){clearTimeout(a[e]),n&&n.constructor===Array?r=r.concat(n):r.push(n),0==--o&&i(null,r)}},this.write=function(t,n,e,i){f||c.push(arguments);var o=l;function r(t,n){0==--o&&"function"==typeof i&&i()}for(var a in s)s[a].write(t,n,e,r)},this};y.prototype.supported=function(){return!0};var t=new y("1pCookie");t.read=function(t,n){for(var e=t+"=",i=document.cookie.split(";"),o=[],r=0;r<i.length;r++){var a=i[r].trim();0===a.indexOf(e)&&o.push(a.substring(e.length,a.length))}n(null,o,this.key)},t.write=function(t,n,e,i){var o=new Date;o.setTime(o.getTime()+15768e8);var r,a="expires="+o.toGMTString();try{var c=window.location.href.match(/(?:https?:\/\/)?(?:www\.)?(.*?)\//);r="."+c[c.length-1]}catch(t){}var s=t+"="+n+"; "+a+"; path=/";s+=void 0!==r?"; domain="+r:"",document.cookie=s,i()},r.addMethod(t);var e=new y("localStorage");e.supported=function(){return"undefined"!=typeof localStorage},e.read=function(t,n){n(null,localStorage.getItem(t),this.key)},e.write=function(t,n,e,i){i(null,localStorage.setItem(t,n))},r.addMethod(e),(k.prototype=new y).supported=function(){return"undefined"!=typeof postMessage},k.prototype.handleEvent=function(t){if(t.origin===this.options.url){var n;try{n=JSON.parse(t.data)}catch(t){}n&&n.callback&&this.callbacks[n.callback](n.value)}},k.prototype.init=function(t){var n=document.createElement("IFRAME");n.setAttribute("src",this.options.url+"/?"+this.options.beaconVersion),n.style.width="1px",n.style.height="1px",n.style.display="none",o(window,"message",this);var e=this;o(n,"load",function(){e.beacon=n.contentWindow,t()}),setTimeout(function(){document.body.appendChild(n)},0)},k.prototype.post=function(t){this.beacon.postMessage(t,this.options.url)},k.prototype.read=function(t,n){var e=this;this.callbacks.get=function(t){n(null,t,e.key)};var i={action:"getAll",key:t};this.post(JSON.stringify(i))},k.prototype.write=function(t,n,e,i){this.callbacks.set=function(t){i(null,t)};var o={action:"set",key:t,value:n};this.post(JSON.stringify(o))},r.addMethod(new k("3pCookie",{url:"https://b.frstre.com",beaconVersion:"v1.4"})),r.init(),l[u].Click=l[u].Click||{},l[u].Click.q=l[u].Click.q||[],l[u].Click.track=function(t,n,e,i){var o;if(null===(e=e||{}).referral_code_param&&void 0===e.referral_code||(o=function(t,n){return t||0===t?t:(n=n||"ref",p()[n])}(e.referral_code,e.referral_code_param)),!(t&&n||o))return g("No tracking parameters",e,i);var r=p(),a=null;for(var c in r)"tm_"===c.slice(0,3)&&((a=a||{})[c.slice(3,c.length)]=r[c]);var s={data:{acc:f,aid:t,sid:n,callback:i,options:e,pm:a,ref:document.referrer||null,cup:document.location.href||null}};o&&(s.data.refc=o),l[u].Click.q.push(s),d()},l[u].Click.flushQueue=function(){l[u].Click.q.reverse();for(var t=l[u].Click.q.length-1;0<=t;t--){var o=l[u].Click.q[t].data,n=h();if(o.aid&&o.sid||o.refc){var e={acc:o.acc,aid:o.aid,sid:o.sid,pm:o.pm,ref:o.ref,cup:o.cup,refc:o.refc};n&&(e.vids=n),a(l[u].baseUrl+"/event/",e,null,function(t,n){var e=t.response||t.responseText;if(n&&e){var i=JSON.parse(e);if(i.vid)return r.write("tap_vid",i.vid),v([i.vid]),void("function"==typeof o.callback&&(1==o.options.always_callback?o.callback(null,i):o.callback(i)))}return g("Tracking request failed",o.options,o.callback)})}l[u].Click.q.splice(t,1)}},l[u].Conversion=l[u].Conversion||{},l[u].Conversion.q=l[u].Conversion.q||[],l[u].Conversion.flushQueue=function(){l[u].Conversion.q.reverse();for(var t=l[u].Conversion.q.length-1;0<=t;t--){var i=l[u].Conversion.q[t].data,n=l[u].Conversion.q[t].type,e=void 0!==l[u].Conversion.q[t].vid?l[u].Conversion.q[t].vid:h();if(!(i.acc&&e||i.options.attribution_id))return g("Non-tracked visitor",i.options,i.callback);var o,r=l[u].baseUrlDepr+"/conversions/";if("single"==n)o={acc:i.acc,vid:e,tid:i.tid,tam:i.tam,options:i.options,ct:i.ct};else{if("multi"!=n)return g("Missing request type",i.options,i.callback);o={acc:i.acc,vid:e,tid:i.tid,options:i.options,com:i.com}}a(r,o,"POST",function(t,n){if(!n)return g("Conversion denied",i.options,i.callback);var e;try{e=JSON.parse(t.response)}catch(t){return g("Conversion denied",i.options,i.callback)}"function"==typeof i.callback&&(1==i.options.always_callback?i.callback(null,e):i.callback(e,"success"))}),e&&e.length&&l[u].Conversion.q.splice(t,1)}},l[u].create=function(t,n,e){f=t,r.read("tap_vid",{},function(t,n){v(n),d(),"function"==typeof e&&e()})},l[u].detect=function(t,n){t=t||{},this.urlParams=p();var e=this.urlParams[t.asset_param||"tap_a"],i=this.urlParams[t.source_param||"tap_s"];l[u].Click.track(e,i,t,n)},l[u].click=function(t,n,e){var i=t||{};n=n||{};var o=i.tap_a||i.asset_id,r=i.tap_s||i.source_id;void 0!==i.referral_code&&(n.referral_code=i.referral_code),l[u].Click.track(o,r,n,e)},l[u].conversion=function(t,n,e,i,o){var r={type:"single",data:{acc:f,tid:t=t||null,tam:n=void 0!==n?n:null,options:e=e||{},ct:i,callback:o}};l[u].Conversion.q.push(r),d()},l[u].transactionMulti=function(t,n,e,i){l[u].conversionMulti(t,n,e,i)},l[u].conversionMulti=function(t,n,e,i){var o={type:"multi",data:{acc:f,tid:t,com:e,options:n=n||{},callback:i}};l[u].Conversion.q.push(o),d()},l[u].detectClick=function(t){l[u].detect({referral_code_param:null},t)},l[u].transaction=function(t,n,e,i,o){l[u].conversion(t,n,e,i,o)};!function(){var t;i.reverse();for(var n=i.length-1;0<=n;n--){var e=i[n][0];"create"===e&&t||(l[u].apply(window,i[n]),i.splice(n,1),"create"===e&&(t=!0))}}()}function o(t,n,e){t.addEventListener?t.addEventListener(n,e,!1):t.attachEvent&&t.attachEvent("on"+n,e)}function c(t,n,e){var i,o,r,a;if(a=/\[\]$/,n instanceof Array)for(o=0,r=n.length;o<r;o++)a.test(t)?e(t,n[o]):c(t+"["+("object"==typeof n[o]?o:"")+"]",n[o],e);else if("object"==typeof n)for(i in n)c(t+"["+i+"]",n[i],e);else e(t,n)}function a(t,n,e,i){(n=function(t){for(key in t)void 0===t[key]&&delete t[key];return t}(n)).sv="tap-v2";var o=t+"?"+s(n),r="GET"===(e=e||(2083<o.length?"POST":"GET"))?o:t;n="POST"===e?JSON.stringify(n):null;var a=new XMLHttpRequest;if("withCredentials"in a)a.open(e,r,!0);else{if("undefined"==typeof XDomainRequest)return;var c=function(){};(a=new XDomainRequest).onerror=c,a.ontimeout=c,a.onprogress=c,a.onload=function(){"function"==typeof i&&i(a,!0)},a.timeout=5e3,a.open(e,r)}a.onreadystatechange=function(){if(a.readyState<4)return;if(200!==a.status)return void("function"==typeof i&&i(a,!1));4===a.readyState&&"function"==typeof i&&i(a,!0)},a.send(n)}function p(){var t={},n=function(t){return decodeURIComponent(t.replace(/\+/g," "))},e=location.search.substring(1),i=location.hash.substring(1),o=e.split("&");for(var r in o=o.concat(i.split("&")))if(o.hasOwnProperty(r)){var a=o[r].toString().split("=");1<a.length&&(t[n(a[0])]=n(a[1]))}return t}function d(){n&&(l[u].Click.flushQueue(),l[u].Conversion.flushQueue())}function v(t){l[u].vid=t.sort()[0],l[u].vids=t,n=!0}function h(){if(l[u].vids){for(var t=[],n=l[u].vids.length-1;0<=n;n--){var e=l[u].vids[n];e&&-1===t.indexOf(e)&&t.push(e)}if(t.length)return t}}function y(t,n){return this.key=t,this.options=n||{},this.setOption=function(t,n){this.options[t]=n},this}function k(){return this.constructor.apply(this,arguments),this.callbacks={},this}function g(t,n,e){if("function"==typeof e)return 1==n.always_callback?e(t):!0===n.alwaysFireCb?e(null,"error",t):void 0}}();